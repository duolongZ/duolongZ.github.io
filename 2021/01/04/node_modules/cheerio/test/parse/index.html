<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="var expect &#x3D; require(&#39;expect.js&#39;),     parse &#x3D; require(&#39;..&#x2F;lib&#x2F;parse&#39;),     defaultOpts &#x3D; require(&#39;..&#39;).prototype.options;   &#x2F;&#x2F; Tags var basic &#x3D; &#39;&#39;; var siblings &#x3D; &#39;&#39;;  &#x2F;&#x2F; Single Tags var single &#x3D; &#39;&#39;;">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2021/01/04/node_modules/cheerio/test/parse/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="var expect &#x3D; require(&#39;expect.js&#39;),     parse &#x3D; require(&#39;..&#x2F;lib&#x2F;parse&#39;),     defaultOpts &#x3D; require(&#39;..&#39;).prototype.options;   &#x2F;&#x2F; Tags var basic &#x3D; &#39;&#39;; var siblings &#x3D; &#39;&#39;;  &#x2F;&#x2F; Single Tags var single &#x3D; &#39;&#39;;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/01/04/node_modules/cheerio/test/parse/hello.png">
<meta property="article:published_time" content="2021-01-04T15:49:38.245Z">
<meta property="article:modified_time" content="2015-01-24T21:47:06.000Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/01/04/node_modules/cheerio/test/parse/hello.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-node_modules/cheerio/test/parse" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/04/node_modules/cheerio/test/parse/" class="article-date">
  <time class="dt-published" datetime="2021-01-04T15:49:38.245Z" itemprop="datePublished">2021-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        var expect = require('expect.js'),
    parse = require('../lib/parse'),
    defaultOpts = require('..').prototype.options;


// Tags
var basic = '<html></html>';
var siblings = '<h2></h2><p></p>';

// Single Tags
var single = '<br/>';
var singleWrong = '<br>';

// Children
var children = '<html><br/></html>';
var li = '<li class="durian">Durian</li>';

// Attributes
var attributes = '<img src="hello.png" alt="man waving">';
var noValueAttribute = '<textarea disabled></textarea>';

// Comments
var comment = '<!-- sexy -->';
var conditional = '<!--[if IE 8]><html class="no-js ie8" lang="en"><![endif]-->';

// Text
var text = 'lorem ipsum';

// Script
var script = '<script type="text/javascript">alert("hi world!");</script>';
var scriptEmpty = '<script></script>';

// Style
var style = '<style type="text/css"> h2 { color:blue; } </style>';
var styleEmpty = '<style></style>';

// Directives
var directive = '<!doctype html>';


describe('parse', function() {

  describe('.eval', function() {

    it('should parse basic empty tags: ' + basic, function() {
      var tag = parse.evaluate(basic, defaultOpts)[0];
      expect(tag.type).to.equal('tag');
      expect(tag.tagName).to.equal('html');
      expect(tag.childNodes).to.be.empty();
    });

    it('should handle sibling tags: ' + siblings, function() {
      var dom = parse.evaluate(siblings, defaultOpts),
          h2 = dom[0],
          p = dom[1];

      expect(dom).to.have.length(2);
      expect(h2.tagName).to.equal('h2');
      expect(p.tagName).to.equal('p');
    });

    it('should handle single tags: ' + single, function() {
      var tag = parse.evaluate(single, defaultOpts)[0];
      expect(tag.type).to.equal('tag');
      expect(tag.tagName).to.equal('br');
      expect(tag.childNodes).to.be.empty();
    });

    it('should handle malformatted single tags: ' + singleWrong, function() {
      var tag = parse.evaluate(singleWrong, defaultOpts)[0];
      expect(tag.type).to.equal('tag');
      expect(tag.tagName).to.equal('br');
      expect(tag.childNodes).to.be.empty();
    });

    it('should handle tags with children: ' + children, function() {
      var tag = parse.evaluate(children, defaultOpts)[0];
      expect(tag.type).to.equal('tag');
      expect(tag.tagName).to.equal('html');
      expect(tag.childNodes).to.be.ok();
      expect(tag.childNodes).to.have.length(1);
    });

    it('should handle tags with children: ' + li, function() {
      var tag = parse.evaluate(li, defaultOpts)[0];
      expect(tag.childNodes).to.have.length(1);
      expect(tag.childNodes[0].data).to.equal('Durian');
    });

    it('should handle tags with attributes: ' + attributes, function() {
      var attrs = parse.evaluate(attributes, defaultOpts)[0].attribs;
      expect(attrs).to.be.ok();
      expect(attrs.src).to.equal('hello.png');
      expect(attrs.alt).to.equal('man waving');
    });

    it('should handle value-less attributes: ' + noValueAttribute, function() {
      var attrs = parse.evaluate(noValueAttribute, defaultOpts)[0].attribs;
      expect(attrs).to.be.ok();
      expect(attrs.disabled).to.equal('');
    });

    it('should handle comments: ' + comment, function() {
      var elem = parse.evaluate(comment, defaultOpts)[0];
      expect(elem.type).to.equal('comment');
      expect(elem.data).to.equal(' sexy ');
    });

    it('should handle conditional comments: ' + conditional, function() {
      var elem = parse.evaluate(conditional, defaultOpts)[0];
      expect(elem.type).to.equal('comment');
      expect(elem.data).to.equal(conditional.replace('<!--', '').replace('-->', ''));
    });

    it('should handle text: ' + text, function() {
      var text_ = parse.evaluate(text, defaultOpts)[0];
      expect(text_.type).to.equal('text');
      expect(text_.data).to.equal('lorem ipsum');
    });

    it('should handle script tags: ' + script, function() {
      var script_ = parse.evaluate(script, defaultOpts)[0];
      expect(script_.type).to.equal('script');
      expect(script_.tagName).to.equal('script');
      expect(script_.attribs.type).to.equal('text/javascript');
      expect(script_.childNodes).to.have.length(1);
      expect(script_.childNodes[0].type).to.equal('text');
      expect(script_.childNodes[0].data).to.equal('alert("hi world!");');
    });

    it('should handle style tags: ' + style, function() {
      var style_ = parse.evaluate(style, defaultOpts)[0];
      expect(style_.type).to.equal('style');
      expect(style_.tagName).to.equal('style');
      expect(style_.attribs.type).to.equal('text/css');
      expect(style_.childNodes).to.have.length(1);
      expect(style_.childNodes[0].type).to.equal('text');
      expect(style_.childNodes[0].data).to.equal(' h2 { color:blue; } ');
    });

    it('should handle directives: ' + directive, function() {
      var elem = parse.evaluate(directive, defaultOpts)[0];
      expect(elem.type).to.equal('directive');
      expect(elem.data).to.equal('!doctype html');
      expect(elem.tagName).to.equal('!doctype');
    });

  });

  describe('.parse', function() {

    // root test utility
    function rootTest(root) {
      expect(root.tagName).to.equal('root');

      // Should exist but be null
      expect(root.nextSibling).to.be(null);
      expect(root.previousSibling).to.be(null);
      expect(root.parentNode).to.be(null);

      var child = root.childNodes[0];
      expect(child.parentNode).to.be(null);
    }

    it('should add root to: ' + basic, function() {
      var root = parse(basic, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].tagName).to.equal('html');
    });

    it('should add root to: ' + siblings, function() {
      var root = parse(siblings, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(2);
      expect(root.childNodes[0].tagName).to.equal('h2');
      expect(root.childNodes[1].tagName).to.equal('p');
      expect(root.childNodes[1].parent).to.equal(null);
    });

    it('should add root to: ' + comment, function() {
      var root = parse(comment, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].type).to.equal('comment');
    });

    it('should add root to: ' + text, function() {
      var root = parse(text, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].type).to.equal('text');
    });

    it('should add root to: ' + scriptEmpty, function() {
      var root = parse(scriptEmpty, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].type).to.equal('script');
    });

    it('should add root to: ' + styleEmpty, function() {
      var root = parse(styleEmpty, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].type).to.equal('style');
    });

    it('should add root to: ' + directive, function() {
      var root = parse(directive, defaultOpts);
      rootTest(root);
      expect(root.childNodes).to.have.length(1);
      expect(root.childNodes[0].type).to.equal('directive');
    });

    it('should expose the DOM level 1 API', function() {
      var root = parse('<div><a></a><span></span><p></p></div>', defaultOpts).childNodes[0];
      var childNodes = root.childNodes;

      expect(childNodes).to.have.length(3);

      expect(root.tagName).to.be('div');
      expect(root.firstChild).to.be(childNodes[0]);
      expect(root.lastChild).to.be(childNodes[2]);

      expect(childNodes[0].tagName).to.be('a');
      expect(childNodes[0].previousSibling).to.be(null);
      expect(childNodes[0].nextSibling).to.be(childNodes[1]);
      expect(childNodes[0].parentNode).to.be(root);
      expect(childNodes[0].childNodes).to.have.length(0);
      expect(childNodes[0].firstChild).to.be(null);
      expect(childNodes[0].lastChild).to.be(null);

      expect(childNodes[1].tagName).to.be('span');
      expect(childNodes[1].previousSibling).to.be(childNodes[0]);
      expect(childNodes[1].nextSibling).to.be(childNodes[2]);
      expect(childNodes[1].parentNode).to.be(root);
      expect(childNodes[1].childNodes).to.have.length(0);
      expect(childNodes[1].firstChild).to.be(null);
      expect(childNodes[1].lastChild).to.be(null);

      expect(childNodes[2].tagName).to.be('p');
      expect(childNodes[2].previousSibling).to.be(childNodes[1]);
      expect(childNodes[2].nextSibling).to.be(null);
      expect(childNodes[2].parentNode).to.be(root);
      expect(childNodes[2].childNodes).to.have.length(0);
      expect(childNodes[2].firstChild).to.be(null);
      expect(childNodes[2].lastChild).to.be(null);
    });
  });

});

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/04/node_modules/cheerio/test/parse/" data-id="ckjiqr6rq0022p4uncunz2lq9" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/01/04/node_modules/cheerio/test/fixtures/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2021/01/04/node_modules/cheerio/test/xml/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/04/package/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/01/04/node_modules/core-util-is/package/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/01/04/node_modules/readable-stream/node_modules/core-util-is/package/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/01/04/node_modules/htmlparser2/node_modules/readable-stream/node_modules/core-util-is/package/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/01/04/node_modules/cheerio/node_modules/htmlparser2/node_modules/readable-stream/node_modules/core-util-is/package/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>