<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="var expect &#x3D; require(&#39;expect.js&#39;),   cheerio &#x3D; require(&#39;..&#x2F;..&#39;),   food &#x3D; require(&#39;..&#x2F;fixtures&#39;).food,   fruits &#x3D; require(&#39;..&#x2F;fixtures&#39;).fruits,   drinks &#x3D; require(&#39;..&#x2F;fixtures&#39;).drinks,   text &#x3D; requ">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2021/01/04/node_modules/hexo-asset-image/node_modules/cheerio/test/api/traversing/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="var expect &#x3D; require(&#39;expect.js&#39;),   cheerio &#x3D; require(&#39;..&#x2F;..&#39;),   food &#x3D; require(&#39;..&#x2F;fixtures&#39;).food,   fruits &#x3D; require(&#39;..&#x2F;fixtures&#39;).fruits,   drinks &#x3D; require(&#39;..&#x2F;fixtures&#39;).drinks,   text &#x3D; requ">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-01-04T15:49:38.248Z">
<meta property="article:modified_time" content="2015-01-24T21:47:06.000Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-node_modules/hexo-asset-image/node_modules/cheerio/test/api/traversing" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/04/node_modules/hexo-asset-image/node_modules/cheerio/test/api/traversing/" class="article-date">
  <time class="dt-published" datetime="2021-01-04T15:49:38.248Z" itemprop="datePublished">2021-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        var expect = require('expect.js'),
  cheerio = require('../..'),
  food = require('../fixtures').food,
  fruits = require('../fixtures').fruits,
  drinks = require('../fixtures').drinks,
  text = require('../fixtures').text;

describe('$(...)', function() {

  var $;

  beforeEach(function() {
    $ = cheerio.load(fruits);
  });

  describe('.find', function() {

    it('() : should find nothing', function() {
      expect($('ul').find()).to.have.length(0);
    });

    it('(single) : should find one descendant', function() {
      expect($('#fruits').find('.apple')[0].attribs['class']).to.equal('apple');
    });

    it('(many) : should find all matching descendant', function() {
      expect($('#fruits').find('li')).to.have.length(3);
    });

    it('(many) : should merge all selected elems with matching descendants', function() {
      expect($('#fruits, #food', food).find('.apple')).to.have.length(1);
    });

    it('(invalid single) : should return empty if cant find', function() {
      expect($('ul').find('blah')).to.have.length(0);
    });

    it('(invalid single) : should query descendants only', function() {
      expect($('#fruits').find('ul')).to.have.length(0);
    });

    it('should return empty if search already empty result', function() {
      expect($('#not-fruits').find('li')).to.have.length(0);
    });

    it('should lowercase selectors', function() {
      expect($('#fruits').find('LI')).to.have.length(3);
    });

    it('should query case-sensitively when in xmlMode', function() {
      var q = cheerio.load('<caseSenSitive allTheWay>', {xmlMode: true});
      expect(q('caseSenSitive')).to.have.length(1);
      expect(q('[allTheWay]')).to.have.length(1);
      expect(q('casesensitive')).to.have.length(0);
      expect(q('[alltheway]')).to.have.length(0);
    });

    it('should throw a SyntaxError if given an invalid selector', function() {
      expect(function() {
        $('#fruits').find(':bah');
      }).to.throwException(function(err) {
        expect(err).to.be.a(SyntaxError);
      });
    });

    describe('(cheerio object) :', function() {
      it('returns only those nodes contained within the current selection', function() {
        var $ = cheerio.load(food);
        var $selection = $('#fruits').find($('li'));

        expect($selection).to.have.length(3);
        expect($selection[0]).to.be($('.apple')[0]);
        expect($selection[1]).to.be($('.orange')[0]);
        expect($selection[2]).to.be($('.pear')[0]);
      });
      it('returns only those nodes contained within any element in the current selection', function() {
        var $ = cheerio.load(food);
        var $selection = $('.apple, #vegetables').find($('li'));

        expect($selection).to.have.length(2);
        expect($selection[0]).to.be($('.carrot')[0]);
        expect($selection[1]).to.be($('.sweetcorn')[0]);
      });
    });

    describe('(node) :', function() {
      it('returns node when contained within the current selection', function() {
        var $ = cheerio.load(food);
        var $selection = $('#fruits').find($('.apple')[0]);

        expect($selection).to.have.length(1);
        expect($selection[0]).to.be($('.apple')[0]);
      });
      it('returns node when contained within any element the current selection', function() {
        var $ = cheerio.load(food);
        var $selection = $('#fruits, #vegetables').find($('.carrot')[0]);

        expect($selection).to.have.length(1);
        expect($selection[0]).to.be($('.carrot')[0]);
      });
      it('does not return node that is not contained within the current selection', function() {
        var $ = cheerio.load(food);
        var $selection = $('#fruits').find($('.carrot')[0]);

        expect($selection).to.have.length(0);
      });
    });
  });

  describe('.children', function() {

    it('() : should get all children', function() {
      expect($('ul').children()).to.have.length(3);
    });

    it('() : should return children of all matched elements', function() {
      expect($('ul ul', food).children()).to.have.length(5);
    });

    it('(selector) : should return children matching selector', function() {
      var cls = $('ul').children('.orange')[0].attribs['class'];
      expect(cls).to.equal('orange');
    });

    it('(invalid selector) : should return empty', function() {
      expect($('ul').children('.lulz')).to.have.length(0);
    });

    it('should only match immediate children, not ancestors', function() {
      expect($(food).children('li')).to.have.length(0);
    });

  });

  describe('.contents', function() {

    beforeEach(function() {
      $ = cheerio.load(text);
    });

    it('() : should get all contents', function() {
      expect($('p').contents()).to.have.length(5);
    });

    it('() : should include text nodes', function() {
      expect($('p').contents().first()[0].type).to.equal('text');
    });

    it('() : should include comment nodes', function() {
      expect($('p').contents().last()[0].type).to.equal('comment');
    });

  });

  describe('.next', function() {

    it('() : should return next element', function() {
      var cls = $('.orange').next()[0].attribs['class'];
      expect(cls).to.equal('pear');
    });

    it('(no next) : should return empty for last child', function() {
      expect($('.pear').next()).to.have.length(0);
    });

    it('(next on empty object) : should return empty', function() {
      expect($('.banana').next()).to.have.length(0);
    });

    it('() : should operate over all elements in the selection', function() {
      expect($('.apple, .orange', food).next()).to.have.length(2);
    });

    describe('(selector) :', function() {
      it('should reject elements that violate the filter', function() {
        expect($('.apple').next('.non-existent')).to.have.length(0);
      });

      it('should accept elements that satisify the filter', function() {
        expect($('.apple').next('.orange')).to.have.length(1);
      });
    });

  });

  describe('.nextAll', function() {

    it('() : should return all following siblings', function() {
      var elems = $('.apple').nextAll();
      expect(elems).to.have.length(2);
      expect(elems[0].attribs['class']).to.equal('orange');
      expect(elems[1].attribs['class']).to.equal('pear');
    });

    it('(no next) : should return empty for last child', function() {
      expect($('.pear').nextAll()).to.have.length(0);
    });

    it('(nextAll on empty object) : should return empty', function() {
      expect($('.banana').nextAll()).to.have.length(0);
    });

    it('() : should operate over all elements in the selection', function() {
      expect($('.apple, .carrot', food).nextAll()).to.have.length(3);
    });

    it('() : should not contain duplicate elements', function() {
      var elems = $('.apple, .orange', food);
      expect(elems.nextAll()).to.have.length(2);
    });

    describe('(selector) :', function() {
      it('should filter according to the provided selector', function() {
        expect($('.apple').nextAll('.pear')).to.have.length(1);
      });

      it('should not consider siblings\' contents when filtering', function() {
        expect($('#fruits', food).nextAll('li')).to.have.length(0);
      });
    });

  });

  describe('.nextUntil', function() {

    it('() : should return all following siblings if no selector specified', function() {
      var elems = $('.apple', food).nextUntil();
      expect(elems).to.have.length(2);
      expect(elems[0].attribs['class']).to.equal('orange');
      expect(elems[1].attribs['class']).to.equal('pear');
    });

    it('() : should filter out non-element nodes', function() {
      var elems = $('<div><div></div><!-- comment -->text<div></div></div>');
      var div = elems.children().eq(0);
      expect(div.nextUntil()).to.have.length(1);
    });

    it('() : should operate over all elements in the selection', function() {
      var elems = $('.apple, .carrot', food);
      expect(elems.nextUntil()).to.have.length(3);
    });

    it('() : should not contain duplicate elements', function() {
      var elems = $('.apple, .orange', food);
      expect(elems.nextUntil()).to.have.length(2);
    });

    it('(selector) : should return all following siblings until selector', function() {
      var elems = $('.apple', food).nextUntil('.pear');
      expect(elems).to.have.length(1);
      expect(elems[0].attribs['class']).to.equal('orange');
    });

    it('(selector not sibling) : should return all following siblings', function() {
      var elems = $('.apple').nextUntil('#vegetables');
      expect(elems).to.have.length(2);
    });

    it('(selector, filterString) : should return all following siblings until selector, filtered by filter', function() {
      var elems = $('.beer', drinks).nextUntil('.water', '.milk');
      expect(elems).to.have.length(1);
      expect(elems[0].attribs['class']).to.equal('milk');
    });

    it('(null, filterString) : should return all following siblings until selector, filtered by filter', function() {
      var elems = $('<ul><li></li><li><p></p></li></ul>');
      var empty = elems.find('li').eq(0).nextUntil(null, 'p');
      expect(empty).to.have.length(0);
    });

    it('() : should return an empty object for last child', function() {
      expect($('.pear').nextUntil()).to.have.length(0);
    });

    it('() : should return an empty object when called on an empty object', function() {
      expect($('.banana').nextUntil()).to.have.length(0);
    });

    it('(node) : should return all following siblings until the node', function() {
      var $fruits = $('#fruits').children();
      var elems = $fruits.eq(0).nextUntil($fruits[2]);
      expect(elems).to.have.length(1);
    });

    it('(cheerio object) : should return all following siblings until any member of the cheerio object', function() {
      var $drinks = $(drinks).children();
      var $until = $([$drinks[4], $drinks[3]]);
      var elems = $drinks.eq(0).nextUntil($until);
      expect(elems).to.have.length(2);
    });

  });

  describe('.prev', function() {

    it('() : should return previous element', function() {
      var cls = $('.orange').prev()[0].attribs['class'];
      expect(cls).to.equal('apple');
    });

    it('(no prev) : should return empty for first child', function() {
      expect($('.apple').prev()).to.have.length(0);
    });

    it('(prev on empty object) : should return empty', function() {
      expect($('.banana').prev()).to.have.length(0);
    });

    it('() : should operate over all elements in the selection', function() {
      expect($('.orange, .pear', food).prev()).to.have.length(2);
    });

    describe('(selector) :', function() {
      it('should reject elements that violate the filter', function() {
        expect($('.orange').prev('.non-existent')).to.have.length(0);
      });

      it('should accept elements that satisify the filter', function() {
        expect($('.orange').prev('.apple')).to.have.length(1);
      });
    });

  });

  describe('.prevAll', function() {

    it('() : should return all preceding siblings', function() {
      var elems = $('.pear').prevAll();
      expect(elems).to.have.length(2);
      expect(elems[0].attribs['class']).to.equal('orange');
      expect(elems[1].attribs['class']).to.equal('apple');
    });

    it('(no prev) : should return empty for first child', function() {
      expect($('.apple').prevAll()).to.have.length(0);
    });

    it('(prevAll on empty object) : should return empty', function() {
      expect($('.banana').prevAll()).to.have.length(0);
    });

    it('() : should operate over all elements in the selection', function() {
      expect($('.orange, .sweetcorn', food).prevAll()).to.have.length(2);
    });

    it('() : should not contain duplicate elements', function() {
      var elems = $('.orange, .pear', food);
      expect(elems.prevAll()).to.have.length(2);
    });

    describe('(selector) :', function() {
      it('should filter returned elements', function() {
        var elems = $('.pear').prevAll('.apple');
        expect(elems).to.have.length(1);
      });

      it('should not consider siblings\'s descendents', function() {
        var elems = $('#vegetables', food).prevAll('li');
        expect(elems).to.have.length(0);
      });
    });

  });

  describe('.prevUntil', function() {

    it('() : should return all preceding siblings if no selector specified', function() {
      var elems = $('.pear').prevUntil();
      expect(elems).to.have.length(2);
      expect(elems[0].attribs['class']).to.equal('orange');
      expect(elems[1].attribs['class']).to.equal('apple');
    });

    it('() : should 